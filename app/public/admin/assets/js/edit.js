var b=(e,a,r)=>new Promise((m,h)=>{var V=i=>{try{f(r.next(i))}catch(s){h(s)}},g=i=>{try{f(r.throw(i))}catch(s){h(s)}},f=i=>i.done?m(i.value):Promise.resolve(i.value).then(V,g);f((r=r.apply(e,a)).next())});import{a as B,b as N,u as $}from"./category.js";import{_ as T,b as q,a as P,t as R}from"./index.js";import{l as A}from"./model.js";import{p as D}from"./pinyin-pro.js";import{a5 as p,o as v,c as U,a as y,Y as t,R as o,F as _,S as k,T as w,a8 as E,V as F,W as d,Q as c,X as j}from"./@vue.js";import"./api.js";import"./axios.js";import"./element-plus.js";import"./lodash-es.js";import"./@vueuse.js";import"./@element-plus.js";import"./@popperjs.js";import"./@ctrl.js";import"./dayjs.js";import"./async-validator.js";import"./memoize-one.js";import"./escape-html.js";import"./normalize-wheel-es.js";import"./@floating-ui.js";import"./pinia.js";import"./vue-router.js";import"./js-cookie.js";const O={name:"category-edit",data:()=>({id:0,categorySelected:[-1],categoryProps:{checkStrictly:!0},activeName:"first",activeIndex:"0",category:[],modList:[],params:{pid:0,seo_title:"",seo_keywords:"",seo_description:"",name:"",pinyin:"",path:"",mid:"0",description:"",url:"",sort:0,type:"0",target:"0",status:"0"},paramsRules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u680F\u76EE\u540D\u79F0",trigger:"blur"},{min:2,max:10,message:"\u540D\u79F0\u957F\u5EA6\u5728 2 \u5230 10 \u4E2A\u5B57\u7B26\u4E4B\u95F4",trigger:"blur"}]}}),computed:{},watch:{"params.name":function(e,a){this.params.pinyin=D(e,{toneType:"none"}).replaceAll(" ","");let m=this.params.path.split("/");m.length=m.length-1,m.push(this.params.pinyin),this.params.path=m.join("/")}},created(){this.id=this.$route.params.id,this.modelList(),this.query(),this.findById()},methods:{handleClick(e){this.activeIndex=e.index},query(){return b(this,null,function*(){try{let e=yield B();if(e.code===200){let a=e.data,r=q(this.id,a);r.length>1&&(r.length=r.length-1),this.categorySelected=r;let m=P(R(a));this.category=[{label:"\u9876\u7EA7\u680F\u76EE",value:-1},...m]}}catch(e){console.log(e)}})},modelList(){return b(this,null,function*(){try{let e=yield A(this.cur);e.code===200&&(this.modList=e.data.list.map(a=>(a.id=a.id.toString(),a)))}catch(e){console.log(e)}})},findById(){return b(this,null,function*(){try{let e=yield N(this.id);e.code===200&&(this.params=e.data)}catch(e){console.error(e)}})},handleChange(e){e[0]!=-1&&(this.params.pid=e[e.length-1])},update(){return b(this,null,function*(){try{(yield $(this.params)).code&&(this.$message({message:"\u66F4\u65B0\u6210\u529F^_^",type:"success"}),this.$router.go(-1))}catch(e){console.log(e)}})},submit(e){this.params.path=this.allPath,this.$refs[e].validate(a=>{if(a)this.update();else return console.log("error submit!!"),!1})}}},Q={class:"mr-10 ml-10"},W={class:"mr-10 ml-10 mb-20"},X=d(" \u4E0D\u9009\u62E9\u4E3A\u9876\u7EA7\u680F\u76EE "),Y=d("\u680F\u76EE"),z=d("\u5355\u9875"),G=d("\u57FA\u672C\u6A21\u578B"),H=d("\u663E\u793A"),J=d("\u9690\u85CF"),K=d("\u5F53\u524D\u9875\u9762"),M=d("\u65B0\u9875\u9762"),Z=d("\u4FDD\u5B58");function x(e,a,r,m,h,V){const g=p("el-tab-pane"),f=p("el-tabs"),i=p("el-cascader"),s=p("el-form-item"),n=p("el-input"),u=p("el-radio"),C=p("el-radio-group"),S=p("el-button"),I=p("el-form");return v(),U(_,null,[y("div",Q,[t(f,{modelValue:e.activeName,"onUpdate:modelValue":a[0]||(a[0]=l=>e.activeName=l),onTabClick:V.handleClick},{default:o(()=>[t(g,{label:"\u57FA\u672C\u4FE1\u606F",name:"first"}),t(g,{label:"SEO\u8BBE\u7F6E",name:"second"})]),_:1},8,["modelValue","onTabClick"])]),y("div",W,[t(I,{ref:"params",model:e.params,rules:e.paramsRules,"label-width":"84px",class:"w640"},{default:o(()=>[k(y("div",null,[t(s,{label:"\u4E0A\u7EA7\u680F\u76EE"},{default:o(()=>[t(i,{props:e.categoryProps,"show-all-levels":!1,disabled:!0,modelValue:e.categorySelected,"onUpdate:modelValue":a[1]||(a[1]=l=>e.categorySelected=l),options:e.category,onChange:V.handleChange},null,8,["props","modelValue","options","onChange"]),X]),_:1}),t(s,{label:"\u680F\u76EE\u540D\u79F0",prop:"name"},{default:o(()=>[t(n,{modelValue:e.params.name,"onUpdate:modelValue":a[2]||(a[2]=l=>e.params.name=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"\u680F\u76EE\u6807\u8BC6"},{default:o(()=>[t(n,{modelValue:e.params.pinyin,"onUpdate:modelValue":a[3]||(a[3]=l=>e.params.pinyin=l),disabled:""},null,8,["modelValue"])]),_:1}),t(s,{label:"\u680F\u76EE\u8DEF\u5F84"},{default:o(()=>[t(n,{modelValue:e.params.path,"onUpdate:modelValue":a[4]||(a[4]=l=>e.params.path=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"\u680F\u76EE\u7C7B\u578B"},{default:o(()=>[t(u,{modelValue:e.params.type,"onUpdate:modelValue":a[5]||(a[5]=l=>e.params.type=l),label:"0"},{default:o(()=>[Y]),_:1},8,["modelValue"]),t(u,{modelValue:e.params.type,"onUpdate:modelValue":a[6]||(a[6]=l=>e.params.type=l),label:"1"},{default:o(()=>[z]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u6269\u5C55\u6A21\u578B"},{default:o(()=>[t(C,{modelValue:e.params.mid,"onUpdate:modelValue":a[7]||(a[7]=l=>e.params.mid=l)},{default:o(()=>[t(u,{label:"0"},{default:o(()=>[G]),_:1}),e.modList.length>0?(v(!0),U(_,{key:0},E(e.modList,(l,L)=>(v(),c(u,{key:L,label:l.id},{default:o(()=>[d(j(l.model_name)+"\u6A21\u578B ",1)]),_:2},1032,["label"]))),128)):F("",!0)]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u662F\u5426\u663E\u793A"},{default:o(()=>[t(u,{modelValue:e.params.status,"onUpdate:modelValue":a[8]||(a[8]=l=>e.params.status=l),label:"0"},{default:o(()=>[H]),_:1},8,["modelValue"]),t(u,{modelValue:e.params.status,"onUpdate:modelValue":a[9]||(a[9]=l=>e.params.status=l),label:"1"},{default:o(()=>[J]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"\u680F\u76EE\u6392\u5E8F"},{default:o(()=>[t(n,{modelValue:e.params.sort,"onUpdate:modelValue":a[10]||(a[10]=l=>e.params.sort=l)},null,8,["modelValue"])]),_:1})],512),[[w,e.activeIndex==0]]),k(y("div",null,[t(s,{label:"\u680F\u76EE\u63CF\u8FF0"},{default:o(()=>[t(n,{modelValue:e.params.description,"onUpdate:modelValue":a[11]||(a[11]=l=>e.params.description=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"\u680F\u76EE\u94FE\u63A5"},{default:o(()=>[t(n,{modelValue:e.params.url,"onUpdate:modelValue":a[12]||(a[12]=l=>e.params.url=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"\u6253\u5F00\u65B9\u5F0F"},{default:o(()=>[t(u,{modelValue:e.params.target,"onUpdate:modelValue":a[13]||(a[13]=l=>e.params.target=l),label:"0"},{default:o(()=>[K]),_:1},8,["modelValue"]),t(u,{modelValue:e.params.target,"onUpdate:modelValue":a[14]||(a[14]=l=>e.params.target=l),label:"1"},{default:o(()=>[M]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"seo\u6807\u9898"},{default:o(()=>[t(n,{modelValue:e.params.seo_title,"onUpdate:modelValue":a[15]||(a[15]=l=>e.params.seo_title=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"seo\u5173\u952E\u8BCD"},{default:o(()=>[t(n,{modelValue:e.params.seo_keywords,"onUpdate:modelValue":a[16]||(a[16]=l=>e.params.seo_keywords=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"seo\u63CF\u8FF0"},{default:o(()=>[t(n,{modelValue:e.params.seo_description,"onUpdate:modelValue":a[17]||(a[17]=l=>e.params.seo_description=l)},null,8,["modelValue"])]),_:1})],512),[[w,e.activeIndex==1]]),t(s,null,{default:o(()=>[t(S,{type:"primary",onClick:a[18]||(a[18]=l=>V.submit("params"))},{default:o(()=>[Z]),_:1})]),_:1})]),_:1},8,["model","rules"])])],64)}const we=T(O,[["render",x]]);export{we as default};
