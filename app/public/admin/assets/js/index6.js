var g=(e,n,r)=>new Promise((_,h)=>{var d=t=>{try{p(r.next(t))}catch(u){h(u)}},f=t=>{try{p(r.throw(t))}catch(u){h(u)}},p=t=>t.done?_(t.value):Promise.resolve(t.value).then(d,f);p((r=r.apply(e,n)).next())});import{Y as S,P as x}from"./@element-plus.js";import{s as D,d as E}from"./ad.js";import{_ as v}from"./index.js";import{a5 as m,o as i,c as s,Y as o,R as l,V as c,W as b,X as y}from"./@vue.js";import"./api.js";import"./axios.js";import"./element-plus.js";import"./lodash-es.js";import"./@vueuse.js";import"./@popperjs.js";import"./@ctrl.js";import"./dayjs.js";import"./async-validator.js";import"./memoize-one.js";import"./escape-html.js";import"./normalize-wheel-es.js";import"./@floating-ui.js";import"./pinia.js";import"./vue-router.js";import"./js-cookie.js";const T={name:"ad-index",setup(){return{Edit:S,Delete:x}},data:()=>({keywords:"",tableData:[],multipleSelection:[],count:0,cur:1}),computed:{},created(){this.search()},methods:{search(){return g(this,null,function*(){try{let e=yield D(this.cur,this.keywords);e.code===200&&(this.tableData=[...e.data.list],this.count=e.data.count)}catch(e){console.log(e)}})},handleCurrentChange(e){this.cur=e,this.search()},toggleSelection(e){e?e.forEach(n=>{this.$refs.multipleTable.toggleRowSelection(n)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange(e){this.multipleSelection=e},toEdit(e){let n=e.id;this.$router.push({name:"ad-edit",params:{id:n}})},handleDel(e){return g(this,null,function*(){let n=e.id;try{(yield E(n)).code===200&&(this.$message({message:"\u6587\u7AE0\u5220\u9664\u6210\u529F ^_^",type:"success"}),this.search())}catch(r){console.log(r)}})}}},V=b("\u65B0\u589E"),$={key:0},N={key:1},j={key:0,class:"mr-5"},z={key:1,class:"mr-5"},A={key:2,class:"mr-5"},B={key:3,class:"mr-5"},P={key:4,class:"mr-5"};function R(e,n,r,_,h,d){const f=m("router-link"),p=m("el-row"),t=m("el-table-column"),u=m("el-button"),k=m("el-table"),w=m("el-pagination");return i(),s("div",null,[o(p,{type:"flex",justify:"end"},{default:l(()=>[o(f,{class:"c-fff add-btn",to:"/ad/add"},{default:l(()=>[V]),_:1})]),_:1}),o(k,{ref:"multipleTable",data:e.tableData,"tooltip-effect":"dark","row-key":"id",size:"small",onSelectionChange:d.handleSelectionChange},{default:l(()=>[o(t,{type:"selection"}),o(t,{prop:"id",label:"\u7F16\u53F7",width:"60"}),o(t,{prop:"title",label:"\u6807\u9898"}),o(t,{prop:"mark",label:"\u6807\u8BC6"}),o(t,{prop:"platform",label:"\u5E73\u53F0"},{default:l(a=>[a.row.platform.includes("1")?(i(),s("span",$,"PC")):c("",!0),a.row.platform.includes("2")?(i(),s("span",N,"H5")):c("",!0)]),_:1}),o(t,{prop:"position",label:"\u4F4D\u7F6E"},{default:l(a=>[a.row.position.includes("1")?(i(),s("span",j,"\u9996\u9875")):c("",!0),a.row.position.includes("2")?(i(),s("span",z,"\u9891\u9053\u9875")):c("",!0),a.row.position.includes("3")?(i(),s("span",A,"\u5217\u8868")):c("",!0),a.row.position.includes("4")?(i(),s("span",B,"\u8BE6\u60C5")):c("",!0),a.row.position.includes("5")?(i(),s("span",P,"\u5355\u9875")):c("",!0)]),_:1}),o(t,{prop:"createdAt",label:"\u53D1\u5E03\u65F6\u95F4",width:"160"},{default:l(a=>[b(y(a.row.createdAt),1)]),_:1}),o(t,{prop:"status",label:"\u72B6\u6001"},{default:l(a=>[b(y(a.row.status==1?"\u663E\u793A":"\u9690\u85CF"),1)]),_:1}),o(t,{fixed:"right",label:"\u64CD\u4F5C"},{default:l(a=>[o(u,{icon:_.Edit,circle:"",onClick:C=>d.toEdit(a.row)},null,8,["icon","onClick"]),o(u,{icon:_.Delete,circle:"",onClick:C=>d.handleDel(a.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"]),o(p,{type:"flex",class:"mt-20 align-c",justify:"center"},{default:l(()=>[o(w,{background:"",layout:"prev, pager, next",onCurrentChange:d.handleCurrentChange,"pager-size":10,total:e.count,"hide-on-single-page":""},null,8,["onCurrentChange","total"])]),_:1})])}const ne=v(T,[["render",R]]);export{ne as default};
